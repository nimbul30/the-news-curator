<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Verification Integration Example</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/js/verification-bridge.js"></script>
  </head>
  <body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-lg">
      <h1 class="text-3xl font-bold mb-6">
        AI Verification Integration Example
      </h1>

      <div class="bg-blue-50 border border-blue-200 p-4 rounded-lg mb-6">
        <h2 class="font-bold text-blue-800 mb-2">
          How to Integrate Your AI Verification App
        </h2>
        <p class="text-blue-700 text-sm">
          This example shows how to send verification results to create.html for
          automatic form population.
        </p>
      </div>

      <!-- Simulated Verification Output -->
      <div class="mb-6">
        <h3 class="text-xl font-semibold mb-4">
          Simulated AI Verification Output
        </h3>
        <textarea
          id="verification-output"
          rows="15"
          class="w-full p-4 border rounded-lg font-mono text-sm"
          readonly
        >
{
  "title": "Breaking: New Climate Change Study Reveals Alarming Trends",
  "article_text": "<h2>Study Overview</h2><p>A comprehensive new study published in <em>Nature Climate Change</em> reveals that global warming is accelerating faster than previously predicted.</p><h2>Key Findings</h2><ul><li>Global temperatures have risen 1.2¬∞C since pre-industrial times</li><li>Arctic ice is melting at unprecedented rates</li><li>Sea levels could rise 2 meters by 2100</li></ul><h2>Expert Analysis</h2><p>Dr. Sarah Johnson, lead climate scientist, stated: <blockquote>These findings represent a critical turning point in our understanding of climate change impacts.</blockquote></p>",
  "summary": "New research shows climate change is accelerating beyond previous projections, with significant implications for global sea levels and weather patterns.",
  "sources": "Nature Climate Change Journal\\nNASA Climate Data\\nIPCC Reports 2023\\nNational Weather Service",
  "primary_source": "Nature Climate Change - Volume 13, Issue 8",
  "category": "Environment",
  "tags": "climate change, global warming, environment, science, research",
  "author": "Environmental Research Team",
  "verification_score": 0.92,
  "fact_check_results": "All claims verified against peer-reviewed sources",
  "bias_analysis": "Neutral reporting with scientific backing",
  "credibility_rating": "High - Multiple authoritative sources"
}
            </textarea
        >
      </div>

      <!-- Integration Buttons -->
      <div class="flex gap-4 mb-6">
        <button
          id="send-to-create"
          class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 font-semibold"
        >
          üöÄ Send to Article Creator
        </button>
        <button
          id="test-storage"
          class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-semibold"
        >
          üíæ Test Data Storage
        </button>
        <button
          id="clear-data"
          class="bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 font-semibold"
        >
          üóëÔ∏è Clear Stored Data
        </button>
      </div>

      <!-- Status Display -->
      <div id="status-display" class="hidden p-4 rounded-lg mb-6">
        <div id="status-message"></div>
      </div>

      <!-- Integration Instructions -->
      <div class="bg-gray-50 p-6 rounded-lg">
        <h3 class="text-xl font-semibold mb-4">Integration Instructions</h3>

        <div class="space-y-4">
          <div>
            <h4 class="font-semibold text-gray-800">
              1. Include the Verification Bridge
            </h4>
            <code class="bg-gray-200 p-2 rounded text-sm block mt-1">
              &lt;script src="/js/verification-bridge.js"&gt;&lt;/script&gt;
            </code>
          </div>

          <div>
            <h4 class="font-semibold text-gray-800">
              2. Send Verification Results
            </h4>
            <pre
              class="bg-gray-200 p-3 rounded text-sm mt-1 overflow-x-auto"
            ><code>// In your AI Verification web app
const verificationData = {
  title: "Your article title",
  article_text: "Your article content with HTML",
  summary: "Article summary",
  sources: "List of sources",
  category: "Environment", // Must match create.html categories
  tags: "tag1, tag2, tag3",
  // ... other verification results
};

// Send to article creator
window.verificationBridge.sendToCreatePage(verificationData);</code></pre>
          </div>

          <div>
            <h4 class="font-semibold text-gray-800">
              3. Automatic Form Population
            </h4>
            <p class="text-gray-600 text-sm mt-1">
              The create.html page will automatically detect verification data
              and populate the form fields. Users just need to add position,
              images, and publish!
            </p>
          </div>
        </div>
      </div>

      <!-- API Integration Example -->
      <div class="bg-yellow-50 p-6 rounded-lg mt-6">
        <h3 class="text-xl font-semibold mb-4">Alternative: API Integration</h3>
        <p class="text-gray-700 mb-3">
          If your verification app runs on a different domain, you can also use
          URL parameters:
        </p>
        <code class="bg-gray-200 p-2 rounded text-sm block">
          https://thenewscurator.com/create.html?source=verification&data=base64EncodedJSON
        </code>
      </div>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const sendBtn = document.getElementById('send-to-create');
        const testBtn = document.getElementById('test-storage');
        const clearBtn = document.getElementById('clear-data');
        const statusDisplay = document.getElementById('status-display');
        const statusMessage = document.getElementById('status-message');
        const verificationOutput = document.getElementById(
          'verification-output'
        );

        function showStatus(message, type = 'success') {
          statusDisplay.className = `p-4 rounded-lg mb-6 ${
            type === 'success'
              ? 'bg-green-50 border border-green-200'
              : type === 'error'
              ? 'bg-red-50 border border-red-200'
              : 'bg-blue-50 border border-blue-200'
          }`;
          statusMessage.innerHTML = message;
          statusDisplay.classList.remove('hidden');
        }

        sendBtn.addEventListener('click', () => {
          try {
            const verificationData = JSON.parse(verificationOutput.value);
            window.verificationBridge.sendToCreatePage(verificationData);
          } catch (error) {
            showStatus(`Error: ${error.message}`, 'error');
          }
        });

        testBtn.addEventListener('click', () => {
          try {
            const verificationData = JSON.parse(verificationOutput.value);
            const result =
              window.verificationBridge.storeVerificationOutput(
                verificationData
              );

            if (result.success) {
              showStatus(
                `
                            <strong>‚úÖ Data stored successfully!</strong><br>
                            The verification data is now ready for transfer to create.html.<br>
                            <a href="/create.html?source=verification&auto=true" class="text-blue-600 underline">
                                Click here to test auto-population
                            </a>
                        `,
                'success'
              );
            } else {
              showStatus(`‚ùå Storage failed: ${result.error}`, 'error');
            }
          } catch (error) {
            showStatus(`Error: ${error.message}`, 'error');
          }
        });

        clearBtn.addEventListener('click', () => {
          localStorage.removeItem('verification_output');
          showStatus('üóëÔ∏è Stored verification data cleared', 'info');
        });
      });
    </script>
  </body>
</html>
