<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test Verification Workflow - No API Calls</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      .test-section {
        border: 2px solid #3b82f6;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
        background: #eff6ff;
      }
      .success {
        background: #dcfce7;
        border-color: #22c55e;
      }
      .info {
        background: #fef3c7;
        border-color: #f59e0b;
      }
    </style>
  </head>
  <body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto">
      <h1 class="text-3xl font-bold mb-6 text-gray-800">
        üß™ Verification Workflow Test (No API Calls)
      </h1>

      <div class="test-section info">
        <h2 class="text-xl font-bold mb-3">‚ÑπÔ∏è About This Test</h2>
        <p class="mb-2">
          This page simulates the verification workflow WITHOUT making any API
          calls.
        </p>
        <p class="mb-2">
          Use this to test the data transfer between verifier and creator pages
          without spending money on API fees.
        </p>
        <p class="font-semibold">
          ‚úÖ No Gemini API calls ‚Ä¢ ‚úÖ No costs ‚Ä¢ ‚úÖ Instant testing
        </p>
      </div>

      <!-- Step 1: Simulate Verification Data -->
      <div class="test-section">
        <h2 class="text-2xl font-bold mb-4">
          Step 1: Generate Mock Verification Data
        </h2>
        <p class="mb-4 text-gray-700">
          Click the button below to generate sample verification data (no API
          calls):
        </p>

        <button
          id="generate-data-btn"
          class="bg-blue-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-blue-700 transition"
        >
          üé≤ Generate Mock Verification Data
        </button>

        <div id="data-preview" class="mt-4 hidden">
          <h3 class="font-bold mb-2">Generated Data Preview:</h3>
          <pre
            id="data-content"
            class="bg-white p-4 rounded border overflow-auto max-h-96 text-xs"
          ></pre>
        </div>
      </div>

      <!-- Step 2: Store in localStorage -->
      <div class="test-section">
        <h2 class="text-2xl font-bold mb-4">
          Step 2: Store Data in localStorage
        </h2>
        <p class="mb-4 text-gray-700">
          This simulates what the verifier does when you click "Send to
          Creator":
        </p>

        <button
          id="store-data-btn"
          class="bg-green-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-green-700 transition"
          disabled
        >
          üíæ Store Data in localStorage
        </button>

        <div id="storage-status" class="mt-4"></div>
      </div>

      <!-- Step 3: Navigate to Creator -->
      <div class="test-section">
        <h2 class="text-2xl font-bold mb-4">
          Step 3: Navigate to Creator Page
        </h2>
        <p class="mb-4 text-gray-700">
          This will redirect you to the creator page with the stored data:
        </p>

        <div class="flex gap-4">
          <button
            id="goto-create-btn"
            class="bg-purple-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-purple-700 transition"
            disabled
          >
            üöÄ Go to create.html
          </button>

          <button
            id="goto-unified-btn"
            class="bg-indigo-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-indigo-700 transition"
            disabled
          >
            üöÄ Go to create-unified.html
          </button>
        </div>
      </div>

      <!-- Step 4: Manual Testing -->
      <div class="test-section success">
        <h2 class="text-2xl font-bold mb-4">‚úÖ Manual Testing Options</h2>

        <div class="mb-4">
          <h3 class="font-bold mb-2">Check localStorage:</h3>
          <button
            id="check-storage-btn"
            class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition"
          >
            üîç Check localStorage Contents
          </button>
          <div id="storage-check" class="mt-2"></div>
        </div>

        <div class="mb-4">
          <h3 class="font-bold mb-2">Clear localStorage:</h3>
          <button
            id="clear-storage-btn"
            class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition"
          >
            üóëÔ∏è Clear Verification Data
          </button>
        </div>
      </div>

      <!-- Instructions -->
      <div class="test-section">
        <h2 class="text-2xl font-bold mb-4">üìã Testing Instructions</h2>
        <ol class="list-decimal list-inside space-y-2 text-gray-700">
          <li>Click "Generate Mock Verification Data" to create sample data</li>
          <li>
            Click "Store Data in localStorage" to save it (simulates verifier
            behavior)
          </li>
          <li>
            Click either "Go to create.html" or "Go to create-unified.html"
          </li>
          <li>The creator page should auto-populate with the mock data</li>
          <li>Verify all fields are filled correctly</li>
          <li>Return here to test again with different data</li>
        </ol>
      </div>
    </div>

    <script>
      let mockData = null;

      // Mock verification data generator
      function generateMockVerificationData() {
        return {
          title:
            'Test Article: Opponent, Not Enemy - How America Forgot the Difference',
          slug: 'test-article-opponent-not-enemy',
          summary:
            'This is a test article exploring political polarization in America. Generated without API calls for testing purposes.',
          content: `## Introduction

This is a comprehensive test article generated without making any API calls. It simulates the output from the AI verification system.

## Section 1: The Historical Context

In 1996, Senator Bob Dole, accepting the Republican presidential nomination, said of President Bill Clinton, "He is my opponent, not my enemy." This statement reflected a time when political disagreement didn't necessarily mean personal animosity.

## Section 2: The Current Situation

Today's political landscape looks very different. According to research, Americans' ratings for their own party have remained around 70 out of 100, while ratings for the opposing party have dropped dramatically from around 50 to below 20 since the 1980s.

## Section 3: The Consequences

This polarization has real-world consequences, affecting everything from family relationships to democratic institutions. Events like the January 6, 2021 attack on the U.S. Capitol demonstrate how political division can escalate to violence.

## Conclusion

Understanding this shift from viewing opponents as enemies is crucial for the future of American democracy.`,
          sources: `https://www.pewresearch.org/politics/
https://www.americanprogress.org/
https://www.brookings.edu/
Academic Study: American National Election Studies`,
          primary_source: 'American National Election Studies',
          tags: 'politics, polarization, democracy, america',
          category: 'Politics',
          author: 'Test Author',

          // Special Report
          special_report_title:
            'Behind the Story: Understanding Political Polarization',
          special_report_content: `This test article has been generated to simulate the AI verification workflow without making actual API calls.

In a real scenario, this section would contain comprehensive analysis from the AI verification system, including fact-checking results, source credibility assessments, and bias analysis.

For testing purposes, this mock data allows you to verify that the data transfer between the verifier and creator pages works correctly without incurring API costs.`,
          special_report_quotes: `"He is my opponent, not my enemy." - Senator Bob Dole, 1996

"The health of our democracy depends on our ability to disagree without demonizing each other." - Political Scientist`,
          special_report_video: '',

          // Comprehensive Analysis
          suggested_reading: `## Suggested Reading and Further Research

For readers interested in exploring political polarization in greater depth, we recommend the following resources:

### Primary Sources Referenced
1. Pew Research Center - Political Polarization Studies
2. American National Election Studies - Longitudinal Data
3. Brookings Institution - Democracy Research
4. Academic journals on political science

### Research Recommendations
‚Ä¢ **Academic Research**: Look for peer-reviewed studies on political polarization
‚Ä¢ **Historical Context**: Research the evolution of American political discourse
‚Ä¢ **Multiple Perspectives**: Read coverage from various news sources
‚Ä¢ **Data Analysis**: Examine polling data and trend analysis

This mock data demonstrates how the suggested reading section would appear in the final article.`,

          bias_analysis: `## Comprehensive Bias Analysis

This test article has been analyzed for potential bias (simulated for testing):

### Language and Tone Analysis
‚Ä¢ The article uses neutral, factual language
‚Ä¢ Presents multiple perspectives on political polarization
‚Ä¢ Avoids emotionally charged rhetoric
‚Ä¢ Uses qualifying language appropriately

### Source Selection Bias
‚Ä¢ Sources include academic research and reputable institutions
‚Ä¢ Represents diverse viewpoints across the political spectrum
‚Ä¢ Includes both primary and secondary sources
‚Ä¢ Geographic and demographic diversity considered

### Framing and Context
‚Ä¢ Balanced presentation of historical and current perspectives
‚Ä¢ Appropriate context provided for all claims
‚Ä¢ Fair representation of different viewpoints
‚Ä¢ Transparent about limitations

**Note**: This is mock data for testing the workflow without API calls.`,

          claim_source_mapping: `## Comprehensive Claim-to-Source Verification Mapping

This section demonstrates how claims are mapped to sources (test data):

### Claim 1: Bob Dole Quote (1996)
**Source**: Historical records, news archives
**Verification Status**: Verified through multiple sources
**Evidence Strength**: Strong - direct quote with clear attribution

### Claim 2: Polarization Statistics
**Source**: American National Election Studies
**Verification Status**: Verified through academic research
**Evidence Strength**: Strong - longitudinal data from reputable source

### Claim 3: January 6 Events
**Source**: Congressional records, news coverage
**Verification Status**: Verified through official documentation
**Evidence Strength**: Strong - well-documented historical event

**Note**: This is mock data for testing purposes.`,

          rated_sources: `## Detailed Source Ratings and Credibility Analysis

Each source has been evaluated (simulated for testing):

### Source 1: Pew Research Center
**Credibility Assessment**
‚Ä¢ Authority: High - recognized research institution
‚Ä¢ Accuracy: High - rigorous methodology
‚Ä¢ Currency: Current - regularly updated
‚Ä¢ Objectivity: High - non-partisan research

**Quality Indicators**
‚Ä¢ Editorial Standards: Excellent
‚Ä¢ Peer Review: Yes
‚Ä¢ Transparency: High
‚Ä¢ Track Record: Excellent

### Source 2: American National Election Studies
**Credibility Assessment**
‚Ä¢ Authority: High - academic research project
‚Ä¢ Accuracy: High - peer-reviewed data
‚Ä¢ Currency: Current - ongoing study
‚Ä¢ Objectivity: High - academic standards

**Quality Indicators**
‚Ä¢ Editorial Standards: Excellent
‚Ä¢ Peer Review: Yes
‚Ä¢ Transparency: High
‚Ä¢ Track Record: Excellent

**Note**: This is mock data for testing the workflow.`,

          // Verification metadata
          verification_score: '95/100',
          fact_check_results: 'All major claims verified',
          credibility_rating: 'High',
        };
      }

      // Event Listeners
      document
        .getElementById('generate-data-btn')
        .addEventListener('click', () => {
          mockData = generateMockVerificationData();

          document.getElementById('data-preview').classList.remove('hidden');
          document.getElementById('data-content').textContent = JSON.stringify(
            mockData,
            null,
            2
          );
          document.getElementById('store-data-btn').disabled = false;

          showMessage('‚úÖ Mock data generated successfully!', 'success');
        });

      document
        .getElementById('store-data-btn')
        .addEventListener('click', () => {
          if (!mockData) {
            showMessage('‚ùå Please generate data first', 'error');
            return;
          }

          // Store in the same format as the verifier
          const storageData = {
            data: mockData,
            timestamp: new Date().toISOString(),
            source: 'test_workflow',
          };

          localStorage.setItem(
            'verification_output',
            JSON.stringify(storageData)
          );

          document.getElementById('goto-create-btn').disabled = false;
          document.getElementById('goto-unified-btn').disabled = false;

          const status = document.getElementById('storage-status');
          status.innerHTML = `
                <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded">
                    <strong>‚úÖ Success!</strong> Data stored in localStorage as 'verification_output'
                    <br><small>Timestamp: ${storageData.timestamp}</small>
                </div>
            `;
        });

      document
        .getElementById('goto-create-btn')
        .addEventListener('click', () => {
          window.location.href = 'create.html?source=verification&auto=true';
        });

      document
        .getElementById('goto-unified-btn')
        .addEventListener('click', () => {
          window.location.href =
            'create-unified.html?source=verification&auto=true';
        });

      document
        .getElementById('check-storage-btn')
        .addEventListener('click', () => {
          const data = localStorage.getItem('verification_output');
          const checkDiv = document.getElementById('storage-check');

          if (data) {
            const parsed = JSON.parse(data);
            checkDiv.innerHTML = `
                    <div class="bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded mt-2">
                        <strong>‚úÖ Data found in localStorage</strong>
                        <br>Timestamp: ${parsed.timestamp}
                        <br>Source: ${parsed.source}
                        <br>Title: ${parsed.data.title}
                        <br><small>Size: ${data.length} characters</small>
                    </div>
                `;
          } else {
            checkDiv.innerHTML = `
                    <div class="bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded mt-2">
                        <strong>‚ö†Ô∏è No data found in localStorage</strong>
                        <br>Generate and store data first
                    </div>
                `;
          }
        });

      document
        .getElementById('clear-storage-btn')
        .addEventListener('click', () => {
          localStorage.removeItem('verification_output');
          localStorage.removeItem('verificationData');
          showMessage('üóëÔ∏è localStorage cleared', 'info');

          document.getElementById('store-data-btn').disabled = true;
          document.getElementById('goto-create-btn').disabled = true;
          document.getElementById('goto-unified-btn').disabled = true;
          document.getElementById('storage-status').innerHTML = '';
        });

      function showMessage(message, type) {
        const colors = {
          success: 'bg-green-100 border-green-400 text-green-700',
          error: 'bg-red-100 border-red-400 text-red-700',
          info: 'bg-blue-100 border-blue-400 text-blue-700',
        };

        const div = document.createElement('div');
        div.className = `${colors[type]} border px-4 py-3 rounded mt-4`;
        div.textContent = message;

        document.body.appendChild(div);
        setTimeout(() => div.remove(), 3000);
      }

      // Check on load
      window.addEventListener('load', () => {
        const data = localStorage.getItem('verification_output');
        if (data) {
          showMessage(
            '‚ÑπÔ∏è Found existing verification data in localStorage',
            'info'
          );
        }
      });
    </script>
  </body>
</html>
