(()=>{var e={23:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function r(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function i(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}var a=function(){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.article=t,this.options=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach(function(t){r(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}({showImage:!0,showSummary:!0,showCategory:!0,showDate:!1,showAuthor:!1,summaryLength:150,imageHeight:"h-48",onClick:null,className:""},o),this.element=null,this.create()}return t=e,a=[{key:"create",value:function(t){return new e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}},{key:"createList",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.map(function(t){return new e(t,r)});return n&&o.forEach(function(e){return e.appendTo(n)}),o}}],(i=[{key:"create",value:function(){this.element=document.createElement("article"),this.element.className=this.getCardClasses(),this.element.innerHTML=this.getTemplate(),this.bindEvents()}},{key:"getCardClasses",value:function(){return"".concat("bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow cursor-pointer"," ").concat(this.options.className)}},{key:"getTemplate",value:function(){return"\n ".concat(this.options.showImage?this.getImageTemplate():"",'\n<div class="p-4">\n ').concat(this.getTitleTemplate(),"\n ").concat(this.options.showSummary?this.getSummaryTemplate():"",'\n<div class="flex items-center justify-between mt-3">\n ').concat(this.options.showCategory?this.getCategoryTemplate():"","\n ").concat(this.getMetadataTemplate(),"\n</div>\n</div>\n ")}},{key:"getImageTemplate",value:function(){if(this.article.image_url)return'\n<div class="'.concat(this.options.imageHeight,' bg-cover bg-center" \n style="background-image:url(\'').concat(this.article.image_url,"')\">\n</div>\n ");var e=["from-blue-500 to-blue-600","from-green-500 to-green-600","from-purple-500 to-purple-600","from-red-500 to-red-600","from-yellow-500 to-yellow-600","from-indigo-500 to-indigo-600"],t=e[Math.abs(this.hashCode(this.article.title||""))%e.length];return'\n<div class="'.concat(this.options.imageHeight," bg-gradient-to-br ").concat(t,'">\n</div>\n ')}},{key:"getTitleTemplate",value:function(){var e=this.article.title||"Untitled Article";return'\n<h3 class="font-bold text-lg mb-2 text-gray-900 dark:text-white line-clamp-2">\n '.concat(this.escapeHtml(e),"\n</h3>\n ")}},{key:"getSummaryTemplate",value:function(){var e=this.article.summary||this.article.content||"",t=this.truncateText(e,this.options.summaryLength),n=this.escapeHtml(e);return'\n<p class="text-gray-600 dark:text-gray-300 text-sm mb-3 line-clamp-3" \n data-full-summary="'.concat(n,'"\n title="').concat(n,'">\n ').concat(this.escapeHtml(t),"\n</p>\n ")}},{key:"getCategoryTemplate",value:function(){var e=this.getCategory();return e?'\n<span class="text-xs text-primary font-medium bg-primary/10 px-2 py-1 rounded-full">\n '.concat(this.escapeHtml(e),"\n</span>\n "):""}},{key:"getMetadataTemplate",value:function(){var e=[];if(this.options.showDate&&this.article.created_at){var t=new Date(this.article.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"});e.push('<span class="text-xs text-gray-500">'.concat(t,"</span>"))}if(this.options.showAuthor&&this.article.author&&e.push('<span class="text-xs text-gray-500">by '.concat(this.escapeHtml(this.article.author),"</span>")),this.article.content){var n=this.article.content.split(" ").length,r=Math.ceil(n/200);e.push('<span class="text-xs text-gray-500">'.concat(r," min read</span>"))}return e.length>0?'<div class="flex items-center space-x-2">'.concat(e.join(""),"</div>"):""}},{key:"bindEvents",value:function(){var e=this;if(this.element){this.element.addEventListener("click",function(){e.options.onClick?e.options.onClick(e.article):e.navigateToArticle()});var t=this.element.querySelector("[data-full-summary]");t&&this.setupSummaryHover(t)}}},{key:"attachEvents",value:function(e){var t=this;e&&e.addEventListener&&e.addEventListener("click",function(){t.options.onClick?t.options.onClick(t.article):t.navigateToArticle()})}},{key:"setupSummaryHover",value:function(e){var t,n,r=this;e.addEventListener("mouseenter",function(){t=setTimeout(function(){var t=e.getAttribute("data-full-summary");t&&t.length>r.options.summaryLength&&(n=r.createSummaryPopup(t,e))},500)}),e.addEventListener("mouseleave",function(){clearTimeout(t),n&&(n.remove(),n=null)})}},{key:"createSummaryPopup",value:function(e,t){var n=document.createElement("div");n.className="absolute z-50 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-4 max-w-sm",n.style.cssText="max-height:200px;overflow-y:auto;",n.innerHTML='\n<p class="text-sm text-gray-700 dark:text-gray-300 leading-relaxed">\n '.concat(this.escapeHtml(e),"\n</p>\n ");var r=t.getBoundingClientRect();return n.style.position="fixed",n.style.top="".concat(r.bottom+10,"px"),n.style.left="".concat(r.left,"px"),document.body.appendChild(n),n}},{key:"navigateToArticle",value:function(){this.article.slug?window.location.href="article.html?slug=".concat(this.article.slug):this.article._id&&(window.location.href="article.html?id=".concat(this.article._id))}},{key:"getCategory",value:function(){if(this.article.category)return this.article.category;if(this.article.tags){var e=this.article.tags.split(",").map(function(e){return e.trim()});return e.length>0?e[0]:null}return null}},{key:"truncateText",value:function(e,t){return!e||e.length<=t?e:e.substring(0,t).trim()+"..."}},{key:"escapeHtml",value:function(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML}},{key:"hashCode",value:function(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}},{key:"getElement",value:function(){return this.element}},{key:"render",value:function(){return this.template(this.article)}},{key:"template",value:function(e){if(!e)return'<div class="article-card article-card--empty">No article data</div>';var t=function(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"):""},n=this.options.compact?" article-card--compact":"",r=e.image_url?'<div class="article-card__image">\n<img src="'.concat(t(e.image_url),'" alt="').concat(t(e.title),'" loading="lazy">\n</div>'):'<div class="article-card__image article-card__image--placeholder">\n<div class="placeholder-icon">üì∞</div>\n</div>';return'\n<article class="article-card'.concat(n,'" data-slug="').concat(t(e.slug||""),'" role="article" aria-label="Article:').concat(t(e.title||"Untitled"),'">\n ').concat(r,'\n<div class="article-card__content">\n<h2 class="article-card__title">').concat(t(e.title||"Untitled"),'</h2>\n<p class="article-card__category">').concat(t(e.category||"Uncategorized"),"</p>\n ").concat(e.summary?'<p class="article-card__summary">'.concat(t(e.summary),"</p>"):"","\n</div>\n</article>\n ")}},{key:"updateArticle",value:function(e){this.article=e,this.element.innerHTML=this.getTemplate(),this.bindEvents()}},{key:"setLoading",value:function(e){e?this.element.classList.add("opacity-50","pointer-events-none"):this.element.classList.remove("opacity-50","pointer-events-none")}},{key:"appendTo",value:function(e){return e&&this.element&&e.appendChild(this.element),this}},{key:"remove",value:function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}}])&&o(t.prototype,i),a&&o(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,a}();e.exports?e.exports=a:window.ArticleCard=a},382:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function r(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function i(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}var a=function(){return e=function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.options=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach(function(t){r(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}({showSearch:!0,showSubscribe:!0,showBookmarks:!0,logoUrl:"assets/logo-v3.svg",homeUrl:"/"},o),this.categories=["Technology","Science","World","Business","Health","Environment","Sports","Entertainment","Finance","Education","Culture","Politics","Travel","Food","Lifestyle","Opinion","Local","Investigative","Climate","International"],this.init()},t=[{key:"init",value:function(){this.render(),this.bindEvents()}},{key:"render",value:function(){this.container.innerHTML=this.getTemplate()}},{key:"getTemplate",value:function(){return'\n<header class="sticky top-0 z-50 bg-white shadow-md">\n<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n<div class="flex flex-col py-3">\n \x3c!--Top row with title,tagline,search and subscribe--\x3e\n<div class="flex items-center justify-between mb-4">\n '.concat(this.getLogoSection(),"\n ").concat(this.getCategoriesSection(),"\n ").concat(this.getActionsSection(),"\n</div>\n</div>\n</div>\n</header>\n ")}},{key:"getLogoSection",value:function(){return'\n<div class="flex items-center gap-3">\n<img\n src="'.concat(this.options.logoUrl,'"\n alt="The News Curator Logo"\n style="height:150px;width:250px;cursor:pointer"\n onclick="window.location.href=\'').concat(this.options.homeUrl,'\'"\n/>\n<div class="flex flex-col">\n<h1 class="font-serif text-3xl font-bold tracking-tight whitespace-nowrap text-gray-900"></h1>\n<p class="text-sm text-black italic font-medium"></p>\n</div>\n</div>\n ')}},{key:"getCategoriesSection",value:function(){var e=this,t=this.getCategoryRows();return'\n<div class="hidden lg:flex flex-col items-center gap-2">\n '.concat(t.map(function(t){return'\n<div class="flex items-center gap-2 flex-wrap justify-center">\n '.concat(t.map(function(t){return e.getCategoryLink(t)}).join(""),"\n</div>\n ")}).join(""),"\n</div>\n ")}},{key:"getCategoryRows",value:function(){for(var e=[],t=0;t<this.categories.length;t+=7)e.push(this.categories.slice(t,t+7));return e}},{key:"getCategoryLink",value:function(e){var t="About"===e?"transparency-page.html":"index.html?tag=".concat(e.toLowerCase());return'\n<a\n class="bg-black bg-opacity-70 hover:bg-opacity-90 text-white px-2 py-1 rounded-full text-xs font-medium transition-colors"\n href="'.concat(t,'"\n>\n ').concat(e,"\n</a>\n ")}},{key:"getActionsSection",value:function(){return'\n<div class="flex flex-col items-start gap-2">\n '.concat(this.options.showSearch?this.getSearchSection():"",'\n<div class="flex items-center gap-3">\n ').concat(this.options.showSubscribe?this.getSubscribeButton():"","\n ").concat(this.options.showBookmarks?this.getBookmarksButton():"","\n ").concat(this.getMobileMenuButton(),"\n</div>\n</div>\n ")}},{key:"getSearchSection",value:function(){return'\n<label class="relative hidden sm:block">\n<span class="material-symbols-outlined absolute left-3 top-1/2-translate-y-1/2 text-gray-500">search</span>\n<input\n id="search-input"\n class="form-input w-80 min-w-0 resize-none overflow-hidden rounded-full bg-white border-2 border-gray-300 focus:border-primary focus:ring-2 focus:ring-primary/20 pl-10 pr-4 py-4 text-base shadow-md"\n placeholder="Search news..."\n type="search"\n/>\n</label>\n '}},{key:"getSubscribeButton",value:function(){return"\n<button\n onclick=\"document.getElementById('newsletter-form').scrollIntoView({behavior:'smooth'})\"\n class=\"bg-primary text-white px-4 py-2 rounded-lg font-medium hover:bg-primary/90 transition-colors whitespace-nowrap\"\n>\n Subscribe\n</button>\n "}},{key:"getBookmarksButton",value:function(){return'\n<a\n href="/bookmarks"\n class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-medium hover:bg-gray-300 transition-colors whitespace-nowrap"\n>\n Bookmarks\n</a>\n '}},{key:"getMobileMenuButton",value:function(){return'\n<button\n class="mobile-menu-button md:hidden flex flex-col justify-center items-center w-8 h-8 bg-transparent border-none cursor-pointer"\n>\n<span class="block w-6 h-0.5 bg-gray-900 dark:bg-white transition-all duration-300"></span>\n<span class="block w-6 h-0.5 bg-gray-900 dark:bg-white mt-1 transition-all duration-300"></span>\n<span class="block w-6 h-0.5 bg-gray-900 dark:bg-white mt-1 transition-all duration-300"></span>\n</button>\n '}},{key:"bindEvents",value:function(){this.setupSearch(),this.setupMobileMenu()}},{key:"setupSearch",value:function(){var e=this,t=this.container.querySelector("#search-input");t&&t.addEventListener("keypress",function(t){"Enter"===t.key&&e.handleSearch(t.target.value)})}},{key:"setupMobileMenu",value:function(){var e=this,t=this.container.querySelector(".mobile-menu-button");t&&t.addEventListener("click",function(){e.toggleMobileMenu()})}},{key:"handleSearch",value:function(e){e.trim()&&(window.location.href="index.html?search=".concat(encodeURIComponent(e)))}},{key:"toggleMobileMenu",value:function(){var e=new CustomEvent("toggleMobileMenu");document.dispatchEvent(e)}},{key:"updateCategories",value:function(e){this.categories=e,this.render(),this.bindEvents()}},{key:"setActiveCategory",value:function(e){this.container.querySelectorAll('a[href*="tag="]').forEach(function(t){t.classList.remove("bg-primary","bg-opacity-100"),t.classList.add("bg-black","bg-opacity-70"),t.href.includes("tag=".concat(e.toLowerCase()))&&(t.classList.remove("bg-black","bg-opacity-70"),t.classList.add("bg-primary","bg-opacity-100"))})}}],t&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();e.exports?e.exports=a:window.MainNavigation=a},692:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function i(e){var t=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}var a=n(382),c=n(23),s=n(761),l=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()},(t=[{key:"init",value:function(){try{var e=document.querySelector("nav");e&&new a(e),this.initializeArticleCards(),this.setupErrorHandling(),console.log("Application initialized successfully")}catch(e){s.handle(e,{context:"App initialization"})}}},{key:"initializeArticleCards",value:function(){document.querySelectorAll("[data-article]").forEach(function(e){var t=JSON.parse(e.dataset.article);new c(e,t)})}},{key:"setupErrorHandling",value:function(){window.addEventListener("error",function(e){s.handle(e.error,{context:"Global error handler",filename:e.filename,lineno:e.lineno})}),window.addEventListener("unhandledrejection",function(e){s.handle(e.reason,{context:"Unhandled promise rejection"})})}}])&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){return new l}):new l,e.exports?e.exports=l:"undefined"!=typeof window&&(window.App=l)},761:e=>{function t(){var e,r,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function c(t,o,i,a){var c=o&&o.prototype instanceof l?o:l,u=Object.create(c.prototype);return n(u,"_invoke",function(t,n,o){var i,a,c,l=0,u=o||[],p=!1,f={p:0,n:0,v:e,a:y,f:y.bind(e,4),d:function(t,n){return i=t,a=0,c=e,f.n=n,s}};function y(t,n){for(a=t,c=n,r=0;!p&&l&&!o&&r<u.length;r++){var o,i=u[r],y=f.p,h=i[2];t>3?(o=h===n)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=y&&((o=t<2&&y<i[1])?(a=0,f.v=n,f.n=i[1]):y<h&&(o=t<3||i[0]>n||n>h)&&(i[4]=t,i[5]=n,f.n=h,a=0))}if(o||t>1)return s;throw p=!0,n}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(p&&1===u&&y(u,h),a=u,c=h;(r=a<2?e:c)||!p;){i||(a?a<3?(a>1&&(f.n=-1),y(a,c)):f.n=c:f.v=c);try{if(l=2,i){if(a||(o="next"),r=i[o]){if(!(r=r.call(i,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,a<2&&(a=0)}else 1===a&&(r=i.return)&&r.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=e}else if((r=(p=f.n<0)?c:t.call(n,f))!==s)break}catch(t){i=e,a=1,c=t}finally{l=1}}return{value:r,done:p}}}(t,i,a),!0),u}var s={};function l(){}function u(){}function p(){}r=Object.getPrototypeOf;var f=[][i]?r(r([][i]())):(n(r={},i,function(){return this}),r),y=p.prototype=l.prototype=Object.create(f);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,n(e,a,"GeneratorFunction")),e.prototype=Object.create(y),e}return u.prototype=p,n(y,"constructor",p),n(p,"constructor",u),u.displayName="GeneratorFunction",n(p,a,"GeneratorFunction"),n(y),n(y,a,"Generator"),n(y,i,function(){return this}),n(y,"toString",function(){return"[object Generator]"}),(t=function(){return{w:c,m:h}})()}function n(e,t,r,o){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}n=function(e,t,r,o){function a(t,r){n(e,t,function(e){return this._invoke(t,r,e)})}t?i?i(e,t,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},n(e,t,r,o)}function r(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var a=e.apply(t,n);function c(e){r(a,o,i,c,s,"next",e)}function s(e){r(a,o,i,c,s,"throw",e)}c(void 0)})}}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function l(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}var p=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},n=[{key:"handle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.normalizeError(e),r=c(c({},t),{},{timestamp:(new Date).toISOString(),userAgent:navigator.userAgent,url:window.location.href});return this.logError(n,r),this.showUserMessage(n,r),this.sendToMonitoring(n,r),n}},{key:"normalizeError",value:function(e){return e instanceof Error?{type:this.classifyError(e),message:e.message,stack:e.stack,name:e.name}:"object"===i(e)&&null!==e?{type:e.type||this.errorTypes.CLIENT,message:e.message||"An unknown error occurred",stack:e.stack||null,name:e.name||"UnknownError",statusCode:e.statusCode||e.status,details:e.details||null}:{type:this.errorTypes.CLIENT,message:String(e)||"An unknown error occurred",stack:null,name:"UnknownError"}}},{key:"classifyError",value:function(e){return"TypeError"===e.name&&e.message.includes("fetch")?this.errorTypes.NETWORK:"ValidationError"===e.name?this.errorTypes.VALIDATION:e.message&&e.message.includes("401")?this.errorTypes.AUTH:e.message&&e.message.includes("404")?this.errorTypes.NOT_FOUND:e.message&&(e.message.includes("500")||e.message.includes("server"))?this.errorTypes.SERVER:this.errorTypes.CLIENT}},{key:"logError",value:function(e,t){var n={level:this.logLevels.ERROR,error:e,context:t};console.error("ErrorHandler:",e.message,{type:e.type,context:t,stack:e.stack});try{var r=JSON.parse(localStorage.getItem("errorLog")||"[]");r.unshift(n),r.length>50&&r.splice(50),localStorage.setItem("errorLog",JSON.stringify(r))}catch(e){console.warn("Failed to store error in localStorage:",e)}}},{key:"showUserMessage",value:function(e,t){var n=this.getUserFriendlyMessage(e);window.showNotification?window.showNotification(n,"error"):this.createErrorNotification(n,e.type)}},{key:"getUserFriendlyMessage",value:function(e){var t=l(l(l(l(l(l({},this.errorTypes.NETWORK,"Unable to connect to the server. Please check your internet connection and try again."),this.errorTypes.VALIDATION,"Please check your input and try again."),this.errorTypes.AUTH,"You need to log in to perform this action."),this.errorTypes.NOT_FOUND,"The requested content could not be found."),this.errorTypes.SERVER,"A server error occurred. Please try again later."),this.errorTypes.CLIENT,"An unexpected error occurred. Please try again.");return t[e.type]||t[this.errorTypes.CLIENT]}},{key:"createErrorNotification",value:function(e,t){document.querySelectorAll(".error-notification").forEach(function(e){return e.remove()});var n=document.createElement("div");n.className="error-notification error-notification--".concat(t),n.style.cssText="\n position:fixed;\n top:20px;\n right:20px;\n background:#dc3545;\n color:white;\n padding:16px 20px;\n border-radius:4px;\n box-shadow:0 4px 12px rgba(0,0,0,0.15);\n z-index:10000;\n max-width:400px;\n font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;\n font-size:14px;\n line-height:1.4;\n ",n.innerHTML='\n<div style="display:flex;align-items:flex-start;gap:8px;">\n<span style="flex-shrink:0;">‚ö†Ô∏è</span>\n<div style="flex:1;">'.concat(e,'</div>\n<button onclick="this.parentElement.parentElement.remove()" \n style="background:none;border:none;color:white;cursor:pointer;font-size:18px;line-height:1;padding:0;margin-left:8px;">√ó</button>\n</div>\n '),document.body.appendChild(n),setTimeout(function(){n.parentElement&&n.remove()},5e3)}},{key:"sendToMonitoring",value:function(e,t){if(window.MONITORING_ENABLED)try{window.Sentry&&window.Sentry.captureException&&window.Sentry.captureException(new Error(e.message),{tags:{errorType:e.type},extra:{context:t,errorInfo:e}})}catch(e){console.warn("Failed to send error to monitoring service:",e)}}},{key:"handleApiError",value:(a=o(t().m(function e(n){var r,o;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n.json();case 1:r=e.v,e.n=3;break;case 2:e.p=2,e.v,r={message:"HTTP ".concat(n.status,":").concat(n.statusText),statusCode:n.status};case 3:return o={type:this.getErrorTypeFromStatus(n.status),message:r.message||"Request failed with status ".concat(n.status),statusCode:n.status,details:r.details||null},e.a(2,this.handle(o,{url:n.url,status:n.status,statusText:n.statusText}))}},e,this,[[0,2]])})),function(e){return a.apply(this,arguments)})},{key:"getErrorTypeFromStatus",value:function(e){return e>=400&&e<500?401===e?this.errorTypes.AUTH:404===e?this.errorTypes.NOT_FOUND:this.errorTypes.CLIENT:e>=500?this.errorTypes.SERVER:this.errorTypes.CLIENT}},{key:"wrapPromise",value:(r=o(t().m(function e(n){var r,o,i=arguments;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},e.p=1,e.n=2,n;case 2:return e.a(2,e.v);case 3:throw e.p=3,o=e.v,this.handle(o,r),o;case 4:return e.a(2)}},e,this,[[1,3]])})),function(e){return r.apply(this,arguments)})},{key:"getErrorLog",value:function(){try{return JSON.parse(localStorage.getItem("errorLog")||"[]")}catch(e){return console.warn("Failed to retrieve error log:",e),[]}}},{key:"clearErrorLog",value:function(){try{localStorage.removeItem("errorLog")}catch(e){console.warn("Failed to clear error log:",e)}}}],n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r,a}();l(p,"errorTypes",{NETWORK:"NETWORK_ERROR",VALIDATION:"VALIDATION_ERROR",AUTH:"AUTH_ERROR",NOT_FOUND:"NOT_FOUND_ERROR",SERVER:"SERVER_ERROR",CLIENT:"CLIENT_ERROR"}),l(p,"logLevels",{ERROR:"error",WARN:"warn",INFO:"info",DEBUG:"debug"}),e.exports?e.exports=p:"undefined"!=typeof window&&(window.ErrorHandler=p)}},t={};!function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(692)})();